# 部署前检查清单

## ✅ 代码准备

- [x] 所有 `localhost:3002` 已替换为环境变量
- [x] 前端 API 配置已支持环境变量
- [x] 后端端口配置已支持环境变量
- [x] 图片 URL 已使用 `getImageUrl()` 函数

## 📦 部署步骤

### 1. 后端部署（Render）

- [ ] 在 Render 创建 Web Service
- [ ] 连接 GitHub 仓库
- [ ] 设置 Root Directory: `portfolio-backend`
- [ ] 设置 Build Command: `npm install`
- [ ] 设置 Start Command: `node server.js`
- [ ] 添加环境变量：
  - `NODE_ENV`: `production`
  - `JWT_SECRET`: 设置强密码（至少32字符）
  - `PORT`: Render 会自动设置，无需手动配置
- [ ] 记录后端 URL（例如：`https://xxx.onrender.com`）

### 2. 前端部署（Render）

- [ ] 在 Render 创建 Static Site
- [ ] 连接 GitHub 仓库
- [ ] 设置 Root Directory: `portfolio-frontend`
- [ ] 设置 Build Command: `npm install && npm run build`
- [ ] 设置 Publish Directory: `dist`
- [ ] 添加环境变量：
  - `VITE_API_URL`: 后端 URL（例如：`https://xxx.onrender.com`）
- [ ] 记录前端 URL

### 3. 测试

- [ ] 访问前端网站，检查是否正常加载
- [ ] 测试登录功能（后台管理系统）
- [ ] 测试文件上传功能
- [ ] 测试数据增删改查功能
- [ ] 检查图片是否正常显示

## 🔒 安全建议

1. **修改默认账号密码**
   - 登录后台管理系统
   - 确保使用强密码

2. **JWT Secret**
   - 使用随机生成的强密码
   - 至少32个字符
   - 包含字母、数字、特殊字符

3. **HTTPS**
   - Render 自动提供 HTTPS
   - 确保所有请求使用 HTTPS

## 📝 注意事项

1. **免费服务休眠**
   - Render 免费服务 15 分钟无活动后会休眠
   - 首次访问需要等待几秒唤醒
   - 如果经常使用，可以考虑付费计划

2. **文件存储**
   - SQLite 数据库文件会持久化保存
   - 上传的文件会保存在 `uploads` 目录
   - 建议定期备份数据库

3. **环境变量**
   - 生产环境必须设置 `VITE_API_URL`
   - 确保后端 URL 正确
   - 不要包含 `/api` 后缀

## 🆘 常见问题

### 问题1：前端无法连接后端
- 检查 `VITE_API_URL` 环境变量是否正确
- 检查后端服务是否正常运行
- 检查 CORS 配置

### 问题2：图片不显示
- 检查图片 URL 是否正确
- 检查后端文件服务是否正常
- 检查文件路径是否正确

### 问题3：登录失败
- 检查 JWT_SECRET 是否设置
- 检查账号密码是否正确
- 检查后端日志

